- content_for :masthead do
  .container
    h1 "Ambitionen er at skabe en portal, der samler alle erhvervslejemål i Danmark"

article
  .container

    markdown:
      Når målet er at bliver Danmarks førende portal for formidling af
      erhvervslokaler, bygger man ikke sin forretning på en standard hyldevare.

      Der skal bygges nøjagtigt det, der passer til ens forretning, og der skal
      bygges til fremtiden.

      ## Iterativ udvikling

      Lokalebasen.dk ved, at det bedste produkt udvikles ved at få idéer
      realiseret hurtigt og placeret på skærmene foran rigtige brugere. Feedback
      fra de personer, der faktisk bruger og betaler for ens løsning, er
      uvurderlig.

      Ved dagligt at lægge ændringer i drift har Substance Lab sikret at
      Lokalebasen.dk konstant har kunne drage erfaringer fra deres kunder og
      løbende forbedre deres webløsning.


      ## 5 år, samme platform

      For Lokalebasen.dk har det været vigtigt at få webløsning, der er stabil
      og fremtidsikret; Når der er tale om ens forretningsgrundlag, kan det
      ikke betale sig at springe over, hvor gærdet er lavest.

      Lokalebasens platform er udviklet med automatiske tests og kritiske
      øjne på kvaliteten af koden. Det betyder, at den samme kode, der blev sat
      i drift i 2009, stadig kører store dele af Lokalebasen.dk i 2014.


      ## Lokal erfaring

      For Lokalebasen.dk var det vigtigt at finde en lokal leverandør med bred
      erfaring fra udvikling af webløsninger.

      Det fandt de i Substance Lab og fik samtidig en samarbejdspartner, der var
      i stand til at udfordre de forretningsmæssige antagelser og skære igennem
      til den enkle tekniske løsning.

  section.graph
    .graph-mask
      canvas#gross-profit

  .container
    markdown:

      ## Resultatet

      5 år efter lancering er Lokalebasen.dk blevet en succesfuld forretning.
      Den oprindelige kodebase danner stadigt grundlag.

      * 3 lande
      * 5 udviklere
      * 10 ansatte
      * 750 udlejninger om året [1]
      * 70.000 månedlige besøgende [1]


      ## Udbygning af teamet

      ## Internationalt

      ## Integrationer

      ## Resultatet

      10+ ansatte, tilstedeværelse i 5 lande.

      * Omsætning
      * Antal ansatte
      * Flere lande

      [1]: http://www.lokalebasen.dk/nyheder/fortsat-stigende-udlejningstal-og-markant-omsaetningsfremgang-i-2013


== javascript_include_tag "http://d3js.org/d3.v3.min.js"

css:
  .graph {
    background: #ccc;
    height: 300px;
  }
  path {
    stroke: steelblue;
    stroke-width: 2;
    fill: none;
  }

- content_for :scripts do
  javascript:
    function GrossProfitGraph(element, data) {
      this.element = function() {
        return $('.graph');
      };

      this.hasBeenAnimated = function(element) {
        return $(element).hasClass('in');
      };

      this.resetAnimation = function() {
        this.path
          .attr("stroke-dasharray", totalLength + " " + totalLength)
          .attr("stroke-dashoffset", totalLength);
      };

      this.setupWaypoint = function() {
        var graph = this;

        graph.resetAnimation();

        graph.element().waypoint(function(direction) {
          graph.startAnimation(window.path);
        }, {
          offset: "75%"
        });
      };

      this.startAnimation = function() {
        if (this.hasBeenAnimated(this.element())) {
          return false;
        };

        this.path
          .transition()
            .duration(1000)
            .ease("linear")
            .attr("stroke-dashoffset", 0);

        this.element().addClass('in');
      };

      // With help from http://bl.ocks.org/duopixel/4063326

      var height = this.element().height();
      var width = this.element().width();
      var margin = 20;

      // Setup axis
      var x = d3.scale.linear().domain(
        [0, data.length - 1]
      ).range(
        [0 + margin, width - margin]
      );
      var y = d3.scale.linear().domain(
        [0, d3.max(data)]
      ).range(
        [0 + margin, height - margin]
      );

      var svgCanvas = d3.select(this.element()[0])
        .append("svg:svg")
        .attr("width", width)
        .attr("height", height);

      // Move the graph into place
      var graph = svgCanvas.append("svg:g")
        .attr("transform", "translate(0, " + height + ")");

      // Create the line
      var line = d3.svg.line()
        .x(function(d,i) { return x(i); })
        .y(function(d) { return -1 * y(d); });

      // Add the line to the graph
      this.path = graph.append("svg:path").attr("d", line(data));

      var totalLength = this.path.node().getTotalLength();
    };

    $(document).ready(function() {
      var graph = new GrossProfitGraph($('.graph'), [8, 1194, 1542, 1658]);
      graph.setupWaypoint();
    })
